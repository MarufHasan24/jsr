const cnsl=cons,inp=inputdiv,head=scriptm;function main(e){const l={JSON:JSON,Number:Number,String:String,Error:Error};globalThis.global={printf:function(...e){for(var r="",t=0;t<e.length;t++){var n=e[t],o=typeof n;r+="object"==o?l.JSON.stringify(n).replace(/"/g,""):"function"==o?"Æ’"+n+"(){ [code] }":n}cnsl.innerHTML+="$ "+r+"\n"},input:function(e){return new Promise(((l,r)=>{inp.innerHTML="",inp.innerHTML='<div style="color: #fff;">'+e+'</div><input type="text" name="prompt" id="prompttxt" spellcheck="true" autocomplete="off">';let t=document.getElementById("prompttxt");t.innerHTML="",t.focus(),t.addEventListener("keyup",(e=>{"Enter"==e.key?(l(t.value),inp.innerHTML=""):"Escape"==e.key&&(r(),inp.innerHTML="")}))}))},clear:function(){cnsl.innerHTML=""},exit:function(){throw cnsl.innerHTML+="$_",new l.Error("Exit code 0")},sleep:function(e){return new Promise((l=>setTimeout(l,e)))},num:e=>l.Number(e),str:e=>l.String(e),abs:e=>e<0?-e:e,fact:function(e){return 0==e?1:e*this.fact(e-1)}};var r=[];const t=(e=e.replace(/\/\/.+/g,"").replace(/\n|\r/g,"").replace(/\s+/g," ").replace(/'.*?'/g,"").replace(/\"[\s\S]*?\"/g,(function(e){return r.push(e),"<token:s"+(r.length-1)})).replace(/clear\(\)/g,"global.clear()").replace(/exit\(\)/g,"global.exit()").replace(/'/g,"\\'").replace(/`/g,"\\`").trim()).replace(/>(?=.*?\{)/g,"><token:devider>").replace(/}/g,"<token:x2775><token:devider>").replace(/{/g,"<token:x2774><token:devider>").split("<token:devider>").filter((e=>e));let n="";for(let e=0;e<t.length;e++){var o=[];let l=t[e].replace(/\([\w]+\)\(.*?\);/g,(function(e){return o.push(e.replace(/\(/,"").replace(/\)/,"")),""}));n+=o.join(";")+a(l)}function a(e){let l=1,r=/\w+\s*\w*\(?.*\)?\{/g,t=/(velc|velt)\s+\w+\s+=\s*{(\w+:.*,?)*}/g,n=e.match(/^(var|let|const)\s+/g);if(n)throw new Error("SyntaxError: Unexpected token '"+n+"'");let a="";(e=e.replace(/(var|let|const|main)/g,(function(e){return"_"+e}))).includes("#include")&&(e=function(e){return e.replace(/#include\<[\w\,]+\>/g,(function(e){let l=e.replace(/#include\<|\>/g,"");if("global"==l)global.date=Date,global.math=Math,global.json=JSON,global.error=function(...e){throw new Error(...e)},global.object=Object,global.array=Array,global.string=String,global.number=Number,global.boolean=Boolean,global.function=Function,global.regexp=RegExp,global.promise=Promise;else{if(!l.includes("std"))throw new Error("start with std");l.includes("json")&&(global.json=JSON),l.includes("error")&&(global.error=function(...e){throw new Error(...e)}),l.includes("math")&&(global.math=Math),l.includes("date")&&(global.date=Date),l.includes("obj")||(Object=void 0),l.includes("arr")||(Array=void 0),l.includes("str")||(String=void 0),l.includes("num")||(Number=void 0),l.includes("bool")||(Boolean=void 0),l.includes("func")||(Function=void 0),l.includes("reg")||(RegExp=void 0)}return JSON=void 0,Math=void 0,Date=void 0,Error=void 0,""})).replace(/#include\<\"\w+\"\>/g,(e=>{let l=e.split('"')[1];return"const "+l+' = await import("./'+l+'.js");'}))}(e)),e.includes(";")?(a=e.replace(/;/g,";<token:003B>").split("<token:003B>"),l=a.length,a[l-1]||(a.pop(),l--)):a=[e];let c="",g="";for(let e=l-1;e>=0;--e){let l=a[e];if(l.includes("=+")){let e=l.replace(/;/g,"").split("=+");l=e[0]+"="+e[1]+"+"+e[0]+";"}else if(l.includes("=-")){let e=l.replace(/;/g,"").split("=-");l=e[0]+"="+e[1]+"-"+e[0]+";"}else if(l.includes("=*")){let e=l.replace(/;/g,"").split("=*");l=e[0]+"="+e[1]+"*"+e[0]+";"}else if(l.includes("=/")){let e=l.replace(/;/g,"").split("=/");l=e[0]+"="+e[1]+"/"+e[0]+";"}else if(l.includes("=%")){let e=l.replace(/;/g,"").split("=%");l=e[0]+"="+e[1]+"%"+e[0]+";"}l=l.replace(/dt/,"new global.date").replace(/math/,"global.math").replace(/input/g,"await global.input").replace(/print/g,"global.printf").replace(/json/g,"global.json").replace(/error/g,"global.error").replace(/Object/g,"global.object").replace(/Array/g,"global.array").replace(/String/g,"global.string").replace(/Number/g,"global.number").replace(/Boolean/g,"global.boolean").replace(/Function/g,"global.function(main").replace(/velc/g,"const").replace(/velt/g,"let").replace(/num/g,"global.num").replace(/str/g,"global.str").replace(/eval/g,"main").replace(/\|[+-\d\w]+\|/g,(function(e){return"global.abs("+e.replace(/\|/g,"")+")"})).replace(/[\d\w]+!/,(function(e){return"global.fact("+e.replace(/!/,"")+")"})).replace(/(?<=for\(.+),/g,";"),";"===l&&(g=";"),c+=l}if(c=g+c,r.test(c)&&!t.test(c)){let e=c.match(r);for(c=c.replace(r,""),i=0;i<e.length;i++)c+=e[i]}if(t.test(c)){let e=c.match(t),l="";for(i=0;i<e.length;i++)l+=e[i]+";";c=c.replace(t,""),c=l+c}if(c=c.replace(/;+/g,";"),c.includes("<token:x2774>")&&(c=c.replace("<token:x2774>","")+"{"),c.includes("<token:x2775>")&&(c=c.replace("<token:x2775>","")+"}"),c.match(/<token:f\d+/g)){let e=c.match(/<token:f\d+/g);for(let l=0;l<e.length;l++){let r=parseInt(e[l].replace(/<token:f/,""));c=c.replace(e[l],""),c=o[r]+c}}return c}return n=n.replace(/<token:s\d+/g,(function(e){let l=parseInt(e.replace(/<token:s/,""));return r[l]})),r=void 0,"(async function () {"+n+"})()"}