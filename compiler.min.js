const cnsl=cons,inp=inputdiv,head=scriptm;function main(e){var t=!1;let r={jro:function(...e){for(var t="",r=0;r<e.length;r++){var n=e[r];t+=JSON.stringify(n,(function(e,t){if(t instanceof Set){let e=Array.from(t);return"Set("+e.length+"){"+e.toString()+"}"}if(t instanceof Map){let e=Array.from(t),r="Map("+e.length/2+"){";for(let t=0;t<e.length;t++)r+="{'"+e[t][0]+"' => "+e[t][1]+"},";return r+"}"}return"function"==typeof t&&"function"!=typeof t||-1===t.toString().indexOf("class")?"f "+e+"() {[code]}":"function"==typeof t&&-1!==t.toString().indexOf("class")?"constructor"+(e=e.trim()?" "+e.trim()[0].toUpperCase()+e.trim().slice(1):"")+" : class "+t.name+"{[native code]}":t})).replace(/"/g,"")}cnsl.innerHTML+="$ "+t+"\n"},jrin:function(e){return new Promise(((t,r)=>{inp.innerHTML="",inp.innerHTML='<div style="color: #fff;">'+e+'</div><input type="text" name="prompt" id="prompttxt" spellcheck="true" autocomplete="off">';let n=document.getElementById("prompttxt");n.innerHTML="",n.focus(),n.addEventListener("keyup",(e=>{"Enter"==e.key?(t(n.value),inp.innerHTML=""):"Escape"==e.key&&(r(),inp.innerHTML="")}))}))},clear:function(){cnsl.innerHTML=""},exit:function(e){throw cnsl.innerHTML+="$_",new Error(e)},sleep:function(e){return new Promise((t=>setTimeout(t,e)))},num:e=>Number(e),str:e=>String(e),abs:e=>e<0?-e:e,fact:function(e){return 0==e?1:e*this.fact(e-1)},XOR:function(e,t){let r=!1;return r="number"==typeof e&&"number"==typeof t?e*!t+!e*t:!e&&t||e&&!t,r},XNOR:function(e,t){return!e&&!t||e&&t},NOR:function(e,t){return!(e||t)},NAND:function(e,t){return!(e&&t)}};var n="",l=[],o=[],a=[],i=(e=e.replace(/\/\/.+/g,"").replace(/\n|\r/g,"").replace(/\s+/g," ").replace(/'.*?'/g,"").replace(/(?<![\w\$\_\d\.])eval\(`[\s\S\n]+`\);/g,(function(e){return"(async function () {"+(e=e.replace(/eval\(`/g,"").replace(/`\);?/g,""))+"})()"})).replace(/\"[\s\S]*?\"/g,(function(e){return l.push(e),"<token:s"+(l.length-1)})).replace(/vel(c|t)\s[\w\d\$_]+\s?=\s?{([\w\d\$_"]:?[^\s],?)*};?/,(function(e){var t=e.replace(/{([\w\d\$_"]:?[^\s],?)*};?/,"");return o.push(e.replace(t,"")),t+"<token:obj"+(o.length-1)+";"})).replace(/vel(c|t)\s[\w\d\$_]+\s?=\s?{([\w\d\$_"]+\s?)*};?/,(function(e){var t=e.replace(/{([\w\d\$_"]+\s?)*};?/,"");return a.push(e.replace(t,"").replace(/\s/g,",").replace(/{/g,"new Set([").replace(/};?/g,"])")),t+"<token:set"+(a.length-1)+";"})).replace(/clear\(\)/g,"global.clear()").replace(/exit\(/g,"global.exit(").replace(/sleep\(/g,"await global.sleep(").replace(/`/g,"\\`").trim(),[]);const c=e.replace(/>(?=.*?\{)/g,"><token:devider>").replace(/}/g,"<token:x2775><token:devider>").replace(/(function|class)\s([\w\d\$\_])+\([\w\d\$\_\s,\[\]]*\)\s?{/g,(function(e){return i.push(e),"<token:devider><token:f"+(i.length-1)})).replace(/{/g,"<token:x2774><token:devider>").split("<token:devider>").filter((e=>e));let s="";for(let e=0;e<c.length;e++)s+=u(c[e]).replace(/dt\(/,"new global.date(").replace(/(?<![\w\$\_\d\.])jrin\(/g,"await global.jrin(").replace(/(?<![\w\$\_\d\.])jro\(/g,"global.jro(").replace(/(?<![\w\$\_\d\.])json\./g,"global.json.").replace(/(?<![\w\$\_\d\.])exclude\s/g,"delete ").replace(/(?<![\w\$\_\d\.])error(?![\w\d\$\_])/g," global.error").replace(/(?<![\w\$\_\d\.])String(?![\w\d\$\_])/g," global.string").replace(/(?<![\w\$\_\d\.])Number(?![\w\d\$\_])/g," global.number").replace(/(?<![\w\$\_\d\.])Boolean(?![\w\d\$\_])/g," global.boolean").replace(/(?<![\w\$\_\d\.])Func(?![\w\d\$\_])\(/g," global.Func(").replace(/(?<![\w\$\_\d\.])velc(?![\w\d\$\_])\s/g,"const ").replace(/(?<![\w\$\_\d\.])velt(?![\w\d\$\_])\s/g,"let ").replace(/(?<![\w\$\_\d\.])num(?![\w\d\$\_])\(/g," global.num(").replace(/(?<![\w\$\_\d\.])str(?![\w\d\$\_])\(/g," global.str(").replace(/[\d\w]+\s?\\s?[\d\w]+/g,(e=>"global.XOR("+e.replace(/\s?\\s?/,",")+")")).replace(/[\d\w]+\s?\!\\s?[\d\w]+/g,(e=>"global.XNOR("+e.replace(/\s?\!\\s?/,",")+")")).replace(/[\d\w]+\s?\!\|\s?[\d\w]+/g,(e=>"global.NOR("+e.replace(/\s?\!\|\s?/,",")+")")).replace(/[\d\w]+\s?\!\&\s?[\d\w]+/g,(e=>"global.NAND("+e.replace(/\s?\!\&\s?/,",")+")")).replace(/\|[+-\d\w]+\|/g,(function(e){return"global.abs("+e.replace(/\|/g,"")+")"})).replace(/[\d\w]+!/,(function(e){return"global.fact("+e.replace(/!/,"")+")"}));function u(e){let l=1,o="";(e=e.replace(/(?<![\w\d\$_])(var|let|const|main|(D|d)ocument|(W|w)indow|JSON|String|Boolean|Number|(D|d)ate|globalThis|navigator|localStorage|atob|btoa|this)(?![\w\d\$_])/g,(function(e){return"_"+e}))).includes("#include")&&(e=function(e){return e.replace(/#include\s?\<[\w\d\,]+\>/g,(function(e){let l=e.replace(/#include\<|\>/g,"");return"all"==l?(n+="global.json = JSON; global.date = Date; global.error = function (...args) { throw new Error(...args); }; let math = await import('./math_laibrary.js'); let _crypto = await import('./crypto_laibrary.js'); let fs = await import('./browser/fs.js'); let request = await import('./browser/req.js'); let cmd = await import('./browser/cmd.js');",r.error=function(...e){throw new Error(...e)},t=!0,globalThis.global=r):(l.includes("std")&&!t&&(t=!0,globalThis.global=r),l.includes("json")&&(n+="global.json = JSON;"),l.includes("error")&&(r.error=function(...e){throw new Error(...e)}),l.includes("math")?n+='let math = await import("./math_laibrary.js");':l.includes("num")&&(Number.__proto__.isOdd=function(){return this%2!=0},Number.__proto__.isPrime=function(){if(!(this>0))throw"Require a positive number";if(2===this)return!0;if(!(this>1))return!1;for(let e=2;e<this;e++)return this%e!=0},Number.__proto__.fact=function(){let e=1;if(this>0){for(let t=1;t<=this;t++)e*=t;return e}throw"Require a positive number"}),l.includes("date")&&(n+="global.date = Date; Date = undefined;"),l.includes("arr")&&p(),l.includes("str")&&p(),l.includes("func")&&(r.Func=Function),l.includes("reg")||(RegExp=void 0)),""})).replace(/#include\s<"[\w\d]+"\|[\w\d]+?>/g,(e=>{let t=e.replace(/#include<"|"|>/g,"").split("|");return"const "+t[1]+" = await import('"+t[0]+"');"}))}(e)),e.includes(";")?(o=e.replace(/;/g,";<token:003B>").split("<token:003B>"),l=o.length,o[l-1]||(o.pop(),l--)):o=[e];let a="",c="";for(let e=l-1;e>=0;--e){let t=o[e];if(t.includes("=+")){let e=t.replace(/;/g,"").split("=+");t=e[0]+"="+e[1]+"+"+e[0]+";"}else if(t.includes("=-")){let e=t.replace(/;/g,"").split("=-");t=e[0]+"="+e[1]+"-"+e[0]+";"}else if(t.includes("=*")){let e=t.replace(/;/g,"").split("=*");t=e[0]+"="+e[1]+"*"+e[0]+";"}else if(t.includes("=/")){let e=t.replace(/;/g,"").split("=/");t=e[0]+"="+e[1]+"/"+e[0]+";"}else if(t.includes("=%")){let e=t.replace(/;/g,"").split("=%");t=e[0]+"="+e[1]+"%"+e[0]+";"}t=t.replace(/(?<=for\(.+),/g,";"),";"===t&&(c=";"),a+=t}if(a=c+a,a=a.replace(/;+/g,";"),a.includes("<token:x2774>")&&(a=a.replace("<token:x2774>","")+"{"),a.includes("<token:x2775>")&&(a=a.replace("<token:x2775>","")+"}"),a.match(/<token:f\d+/g)){let e=a.match(/<token:f\d+/g);for(let t=0;t<e.length;t++){let r=parseInt(e[t].replace(/<token:f/,""));a=a.replace(e[t],""),a=i[r]+a}}return a}return s=s.replace(/<token:s\d+/g,(function(e){let t=parseInt(e.replace(/<token:s/,""));return l[t]})),s=s.replace(/<token:obj\d+/g,(function(e){let t=parseInt(e.replace(/<token:obj/,""));return o[t]})),s=s.replace(/<token:set\d+/g,(function(e){let t=parseInt(e.replace(/<token:set/,""));return a[t]})),l=void 0,o=void 0,a=void 0,s=s.replace(/class\s([\w\d\$\_])+\([\w\d\$\_\s,\[\]]*\){.*?(};)/g,(function(e){let t=e.replace(/class\s([\w\d\$\_])+/,"");return e.replace(t,"")+"{constructor"+t+"};"})),s=s.replace(/@(?=[\w\d\$_])/g,"this.").replace(/@/g,"this"),"(async function () {"+n+s+"})()";function p(){Array.__proto__.range=function(e,t,r){void 0===r&&(r=1);let n=[];if(e<t)for(let l=e;l<t;l+=r)n.push(l);else for(let l=e;l>t;l+=r)n.push(l);return n},Array.__proto__.sum=function(){let e=0;for(let t=0;t<this.length;t++)e+=this[t];return e},Array.__proto__.product=function(){let e=1;for(let t=0;t<this.length;t++)e*=this[t];return e},Array.__proto__.mean=function(){return this.sum()/this.length},Array.__proto__.median=function(){let e=this.sort();return e.length%2==0?(e[e.length/2]+e[e.length/2-1])/2:e[Math.floor(e.length/2)]},Array.__proto__.mode=function(){let e={};for(let t=0;t<this.length;t++)void 0===e[this[t]]?e[this[t]]=1:e[this[t]]+=1;let t,r=0;for(let n in e)e[n]>r&&(r=e[n],t=n);return t},Array.__proto__.GCD=function(){}}}function run(){localStorage.setItem("ide",ide.value),rundiv.disabled=!0;var ap=async()=>await new Promise(((resolve,reject)=>{try{resolve(eval(main(ide.value)))}catch(e){reject(e)}}));ap().then((e=>{})).catch((e=>{let t="string"!=typeof e?e.message?.replace(/import/g,"include").replace(/global\./g,"")?.replace(/_(var|let|const|main|(D|d)ocument|(W|w)indow|JSON|String|Boolean|Number|(D|d)ate|globalThis|navigator|localStorage|atob|btoa|this)/g,(function(e){return e.replace("_","")})):e;cons.innerHTML+=t.includes("Exit code ")?t:"\nError >"+t}))}