const cnsl=cons,inp=inputdiv,head=scriptm;function main(e){const t={JSON:JSON,Number:Number,String:String,Error:Error};var r=!1;globalThis.global={printf:function(...e){for(var r="",n=0;n<e.length;n++){var l=e[n];r+=t.JSON.stringify(l,(function(e,t){return"function"==typeof t?"f "+e+"() {[code]}":t})).replace(/"/g,"")}cnsl.innerHTML+="$ "+r+"\n"},input:function(e){return new Promise(((t,r)=>{inp.innerHTML="",inp.innerHTML='<div style="color: #fff;">'+e+'</div><input type="text" name="prompt" id="prompttxt" spellcheck="true" autocomplete="off">';let n=document.getElementById("prompttxt");n.innerHTML="",n.focus(),n.addEventListener("keyup",(e=>{"Enter"==e.key?(t(n.value),inp.innerHTML=""):"Escape"==e.key&&(r(),inp.innerHTML="")}))}))},clear:function(){cnsl.innerHTML=""},exit:function(){throw cnsl.innerHTML+="$_",new t.Error("Exit code 0")},sleep:function(e){return new Promise((t=>setTimeout(t,e)))},num:e=>t.Number(e),str:e=>t.String(e),abs:e=>e<0?-e:e,fact:function(e){return 0==e?1:e*this.fact(e-1)},XOR:function(e,t){return!e&&t||e&&!t},XNOR:function(e,t){return!e&&!t||e&&t},NOR:function(e,t){return!(e||t)},NAND:function(e,t){return!(e&&t)}};var n="",l=[];const o=(e=e.replace(/\/\/.+/g,"").replace(/\n|\r/g,"").replace(/\s+/g," ").replace(/'.*?'/g,"").replace(/\"[\s\S]*?\"/g,(function(e){return l.push(e),"<token:s"+(l.length-1)})).replace(/clear\(\)/g,"global.clear()").replace(/exit\(\)/g,"global.exit()").replace(/sleep\(/g,"await global.sleep(").replace(/'/g,"\\'").replace(/`/g,"\\`").trim()).replace(/>(?=.*?\{)/g,"><token:devider>").replace(/}/g,"<token:x2775><token:devider>").replace(/{/g,"<token:x2774><token:devider>").split("<token:devider>").filter((e=>e));let a="";for(let e=0;e<o.length;e++){var c=[];let t=o[e].replace(/\([\w]+\)\(.*?\);/g,(function(e){return c.push(e.replace(/\(/,"").replace(/\)/,"")),""}));a+=c.join(";")+s(t)}function s(e){let t=1,l=/\w+\s*\w*\(?.*\)?\{/g,o=/(velc|velt)\s+\w+\s+=\s*{(\w+:.*,?)*}/g,a=e.match(/^(var|let|const)\s+/g);if(a)throw new Error("SyntaxError: Unexpected token '"+a+"'");let s="";(e=e.replace(/(var|let|const|main)/g,(function(e){return"_"+e}))).includes("#include")&&(e=function(e){return e.replace(/#include\<[\w\d\,]+\>/g,(function(e){let t=e.replace(/#include\<|\>/g,"");if("global"==t)global.date=Date,global.math=Math,global.json=JSON,global.error=function(...e){throw new Error(...e)};else{if(!t.includes("std")||r)throw"started without std";r=!0,t.includes("json")&&(global.json=JSON),t.includes("error")&&(global.error=function(...e){throw new Error(...e)}),t.includes("math")?n+='let math = (await import("./math_laibrary.js")).math;':t.includes("num")?(Number.__proto__.odd=function(){return this%2!=0},Number.__proto__.prime=function(){if(!(this>0))throw"Require a positive number";if(2===this)return!0;if(!(this>1))return!1;for(let e=2;e<this;e++)return this%e!=0},Number.__proto__.fact=function(){let e=1;if(this>0){for(let t=1;t<=this;t++)e*=t;return e}throw"Require a positive number"}):Number=void 0,t.includes("date")&&(global.date=Date),t.includes("arr")&&(Array.__proto__.range=function(e,t,r){void 0===r&&(r=1);let n=[];if(e<t)for(let l=e;l<t;l+=r)n.push(l);else for(let l=e;l>t;l+=r)n.push(l);return n},Array.__proto__.sum=function(){let e=0;for(let t=0;t<this.length;t++)e+=this[t];return e},Array.__proto__.product=function(){let e=1;for(let t=0;t<this.length;t++)e*=this[t];return e},Array.__proto__.mean=function(){return this.sum()/this.length},Array.__proto__.median=function(){let e=this.sort();return e.length%2==0?(e[e.length/2]+e[e.length/2-1])/2:e[Math.floor(e.length/2)]},Array.__proto__.mode=function(){let e={};for(let t=0;t<this.length;t++)void 0===e[this[t]]?e[this[t]]=1:e[this[t]]+=1;let t,r=0;for(let n in e)e[n]>r&&(r=e[n],t=n);return t},Array.__proto__.GCD=function(){}),t.includes("str")?addStrProto():String=void 0,t.includes("bool")||(Boolean=void 0),t.includes("func")&&(global.Func=Function),t.includes("reg")||(RegExp=void 0)}return JSON=void 0,Date=void 0,Error=void 0,""})).replace(/#include\<\"\w+\"\>/g,(e=>{let t=e.split('"')[1];return"const "+t+' = await import("./'+t+'.js");'}))}(e)),e.includes(";")?(s=e.replace(/;/g,";<token:003B>").split("<token:003B>"),t=s.length,s[t-1]||(s.pop(),t--)):s=[e];let u="",p="";for(let e=t-1;e>=0;--e){let t=s[e];if(t.includes("=+")){let e=t.replace(/;/g,"").split("=+");t=e[0]+"="+e[1]+"+"+e[0]+";"}else if(t.includes("=-")){let e=t.replace(/;/g,"").split("=-");t=e[0]+"="+e[1]+"-"+e[0]+";"}else if(t.includes("=*")){let e=t.replace(/;/g,"").split("=*");t=e[0]+"="+e[1]+"*"+e[0]+";"}else if(t.includes("=/")){let e=t.replace(/;/g,"").split("=/");t=e[0]+"="+e[1]+"/"+e[0]+";"}else if(t.includes("=%")){let e=t.replace(/;/g,"").split("=%");t=e[0]+"="+e[1]+"%"+e[0]+";"}t=t.replace(/dt/,"new global.date").replace(/input/g,"await global.input").replace(/print/g,"global.printf").replace(/json/g,"global.json").replace(/error/g,"global.error").replace(/Object/g,"global.object").replace(/Array/g,"global.array").replace(/String/g,"global.string").replace(/Number/g,"global.number").replace(/Boolean/g,"global.boolean").replace(/Func/g,"global.Func").replace(/velc/g,"const").replace(/velt/g,"let").replace(/num/g,"global.num").replace(/str/g,"global.str").replace(/eval\(/g,"main(").replace(/[\d\w]+\s?\^\s?[\d\w]+/g,(e=>"global.XOR("+e.replace(/\s?\^\s?/,",")+")")).replace(/[\d\w]+\s?\!\^\s?[\d\w]+/g,(e=>"global.XNOR("+e.replace(/\s?\!\^\s?/,",")+")")).replace(/[\d\w]+\s?\!\|\s?[\d\w]+/g,(e=>"global.NOR("+e.replace(/\s?\!\|\s?/,",")+")")).replace(/[\d\w]+\s?\!\&\s?[\d\w]+/g,(e=>"global.NAND("+e.replace(/\s?\!\&\s?/,",")+")")).replace(/\|[+-\d\w]+\|/g,(function(e){return"global.abs("+e.replace(/\|/g,"")+")"})).replace(/[\d\w]+!/,(function(e){return"global.fact("+e.replace(/!/,"")+")"})).replace(/(?<=for\(.+),/g,";"),";"===t&&(p=";"),u+=t}if(u=p+u,l.test(u)&&!o.test(u)){let e=u.match(l);for(u=u.replace(l,""),i=0;i<e.length;i++)u+=e[i]}if(o.test(u)){let e=u.match(o),t="";for(i=0;i<e.length;i++)t+=e[i]+";";u=u.replace(o,""),u=t+u}if(u=u.replace(/;+/g,";"),u.includes("<token:x2774>")&&(u=u.replace("<token:x2774>","")+"{"),u.includes("<token:x2775>")&&(u=u.replace("<token:x2775>","")+"}"),u.match(/<token:f\d+/g)){let e=u.match(/<token:f\d+/g);for(let t=0;t<e.length;t++){let r=parseInt(e[t].replace(/<token:f/,""));u=u.replace(e[t],""),u=c[r]+u}}return u}return a=a.replace(/<token:s\d+/g,(function(e){let t=parseInt(e.replace(/<token:s/,""));return l[t]})),l=void 0,"(async function () {"+n+a+"})()"}