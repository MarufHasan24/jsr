const cnsl=cons,inp=inputdiv,head=scriptm;function main(e){const r={JSON:JSON,Number:Number,String:String,Error:Error};var t=!1;globalThis.global={jso:function(...e){for(var t="",n=0;n<e.length;n++){var l=e[n];t+=r.JSON.stringify(l,(function(e,r){return"function"==typeof r?"f "+e+"() {[code]}":r})).replace(/"/g,"")}cnsl.innerHTML+="$ "+t+"\n"},jsin:function(e){return new Promise(((r,t)=>{inp.innerHTML="",inp.innerHTML='<div style="color: #fff;">'+e+'</div><input type="text" name="prompt" id="prompttxt" spellcheck="true" autocomplete="off">';let n=document.getElementById("prompttxt");n.innerHTML="",n.focus(),n.addEventListener("keyup",(e=>{"Enter"==e.key?(r(n.value),inp.innerHTML=""):"Escape"==e.key&&(t(),inp.innerHTML="")}))}))},clear:function(){cnsl.innerHTML=""},exit:function(e){throw cnsl.innerHTML+="$_",new r.Error(e)},sleep:function(e){return new Promise((r=>setTimeout(r,e)))},num:e=>r.Number(e),str:e=>r.String(e),abs:e=>e<0?-e:e,fact:function(e){return 0==e?1:e*this.fact(e-1)},XOR:function(e,r){return!e&&r||e&&!r},XNOR:function(e,r){return!e&&!r||e&&r},NOR:function(e,r){return!(e||r)},NAND:function(e,r){return!(e&&r)}};var n="",l=[];const o=(e=e.replace(/\/\/.+/g,"").replace(/\n|\r/g,"").replace(/\s+/g," ").replace(/'.*?'/g,"").replace(/\"[\s\S]*?\"/g,(function(e){return l.push(e),"<token:s"+(l.length-1)})).replace(/clear\(\)/g,"global.clear()").replace(/exit\(\)/g,"global.exit()").replace(/sleep\(/g,"await global.sleep(").replace(/'/g,"\\'").replace(/`/g,"\\`").trim()).replace(/>(?=.*?\{)/g,"><token:devider>").replace(/}/g,"<token:x2775><token:devider>").replace(/{/g,"<token:x2774><token:devider>").split("<token:devider>").filter((e=>e));let a="";for(let e=0;e<o.length;e++){var c=[];let r=o[e].replace(/\([\w]+\)\(.*?\);/g,(function(e){return c.push(e.replace(/\(/,"").replace(/\)/,"")),""}));a+=c.join(";")+s(r)}function s(e){let r=1,l=/\w+\s*\w*\(?.*\)?\{/g,o=/(velc|velt)\s+\w+\s+=\s*{(\w+:.*,?)*}/g,a=e.match(/^(var|let|const)\s+/g);if(a)throw new Error("SyntaxError: Unexpected token '"+a+"'");let s="";(e=e.replace(/(var|let|const|main)/g,(function(e){return"_"+e}))).includes("#include")&&(e=function(e){return e.replace(/#include\<[\w\d\,]+\>/g,(function(e){let r=e.replace(/#include\<|\>/g,"");if("global"==r)global.date=Date,global.math=Math,global.json=JSON,global.error=function(...e){throw new Error(...e)};else{if(!r.includes("std")||t)throw"started without std";t=!0,r.includes("json")&&(global.json=JSON),r.includes("error")&&(global.error=function(...e){throw new Error(...e)}),r.includes("math")?n+='let math = (await import("./math_laibrary.js")).math;':r.includes("num")?(Number.__proto__.odd=function(){return this%2!=0},Number.__proto__.prime=function(){if(!(this>0))throw"Require a positive number";if(2===this)return!0;if(!(this>1))return!1;for(let e=2;e<this;e++)return this%e!=0},Number.__proto__.fact=function(){let e=1;if(this>0){for(let r=1;r<=this;r++)e*=r;return e}throw"Require a positive number"}):Number=void 0,r.includes("date")&&(global.date=Date),r.includes("arr")&&(Array.__proto__.range=function(e,r,t){void 0===t&&(t=1);let n=[];if(e<r)for(let l=e;l<r;l+=t)n.push(l);else for(let l=e;l>r;l+=t)n.push(l);return n},Array.__proto__.sum=function(){let e=0;for(let r=0;r<this.length;r++)e+=this[r];return e},Array.__proto__.product=function(){let e=1;for(let r=0;r<this.length;r++)e*=this[r];return e},Array.__proto__.mean=function(){return this.sum()/this.length},Array.__proto__.median=function(){let e=this.sort();return e.length%2==0?(e[e.length/2]+e[e.length/2-1])/2:e[Math.floor(e.length/2)]},Array.__proto__.mode=function(){let e={};for(let r=0;r<this.length;r++)void 0===e[this[r]]?e[this[r]]=1:e[this[r]]+=1;let r,t=0;for(let n in e)e[n]>t&&(t=e[n],r=n);return r},Array.__proto__.GCD=function(){}),r.includes("str")?addStrProto():String=void 0,r.includes("bool")||(Boolean=void 0),r.includes("func")&&(global.Func=Function),r.includes("reg")||(RegExp=void 0)}return JSON=void 0,Date=void 0,Error=void 0,""})).replace(/#include\<\"\w+\"\>/g,(e=>{let r=e.split('"')[1];return"const "+r+' = await import("./'+r+'.js");'}))}(e)),e.includes(";")?(s=e.replace(/;/g,";<token:003B>").split("<token:003B>"),r=s.length,s[r-1]||(s.pop(),r--)):s=[e];let u="",p="";for(let e=r-1;e>=0;--e){let r=s[e];if(r.includes("=+")){let e=r.replace(/;/g,"").split("=+");r=e[0]+"="+e[1]+"+"+e[0]+";"}else if(r.includes("=-")){let e=r.replace(/;/g,"").split("=-");r=e[0]+"="+e[1]+"-"+e[0]+";"}else if(r.includes("=*")){let e=r.replace(/;/g,"").split("=*");r=e[0]+"="+e[1]+"*"+e[0]+";"}else if(r.includes("=/")){let e=r.replace(/;/g,"").split("=/");r=e[0]+"="+e[1]+"/"+e[0]+";"}else if(r.includes("=%")){let e=r.replace(/;/g,"").split("=%");r=e[0]+"="+e[1]+"%"+e[0]+";"}r=r.replace(/dt/,"new global.date").replace(/input/g,"await global.input").replace(/print/g,"global.printf").replace(/json/g,"global.json").replace(/error/g,"global.error").replace(/Object/g,"global.object").replace(/Array/g,"global.array").replace(/String/g,"global.string").replace(/Number/g,"global.number").replace(/Boolean/g,"global.boolean").replace(/Func/g,"global.Func").replace(/velc/g,"const").replace(/velt/g,"let").replace(/num/g,"global.num").replace(/str/g,"global.str").replace(/eval\(/g,"main(").replace(/[\d\w]+\s?\^\s?[\d\w]+/g,(e=>"global.XOR("+e.replace(/\s?\^\s?/,",")+")")).replace(/[\d\w]+\s?\!\^\s?[\d\w]+/g,(e=>"global.XNOR("+e.replace(/\s?\!\^\s?/,",")+")")).replace(/[\d\w]+\s?\!\|\s?[\d\w]+/g,(e=>"global.NOR("+e.replace(/\s?\!\|\s?/,",")+")")).replace(/[\d\w]+\s?\!\&\s?[\d\w]+/g,(e=>"global.NAND("+e.replace(/\s?\!\&\s?/,",")+")")).replace(/\|[+-\d\w]+\|/g,(function(e){return"global.abs("+e.replace(/\|/g,"")+")"})).replace(/[\d\w]+!/,(function(e){return"global.fact("+e.replace(/!/,"")+")"})).replace(/(?<=for\(.+),/g,";"),";"===r&&(p=";"),u+=r}if(u=p+u,l.test(u)&&!o.test(u)){let e=u.match(l);for(u=u.replace(l,""),i=0;i<e.length;i++)u+=e[i]}if(o.test(u)){let e=u.match(o),r="";for(i=0;i<e.length;i++)r+=e[i]+";";u=u.replace(o,""),u=r+u}if(u=u.replace(/;+/g,";"),u.includes("<token:x2774>")&&(u=u.replace("<token:x2774>","")+"{"),u.includes("<token:x2775>")&&(u=u.replace("<token:x2775>","")+"}"),u.match(/<token:f\d+/g)){let e=u.match(/<token:f\d+/g);for(let r=0;r<e.length;r++){let t=parseInt(e[r].replace(/<token:f/,""));u=u.replace(e[r],""),u=c[t]+u}}return u}return a=a.replace(/<token:s\d+/g,(function(e){let r=parseInt(e.replace(/<token:s/,""));return l[r]})),l=void 0,"(async function () {"+n+a+"})()"}function run(){localStorage.setItem("ide",ide.value),rundiv.disabled=!0;var ap=async()=>await new Promise(((resolve,reject)=>{try{resolve(eval(main(ide.value)))}catch(e){reject(e)}}));ap().then((e=>{})).catch((e=>{let r="string"!=typeof e?e.message?.replace(/import/g,"include").replace(/global\./g,"")?.replace(/_(var|let|const|main)/g,(function(e){return e.replace("_","")})):e;cons.innerHTML+=r.includes("Exit code ")?r:"\nError >"+r}))}